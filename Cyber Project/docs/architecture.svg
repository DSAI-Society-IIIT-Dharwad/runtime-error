<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700" width="1000" height="700">
  <defs>
    <style>
      .box { fill: #f0f4f8; stroke: #2563eb; stroke-width: 2; }
      .box-header { fill: #2563eb; }
      .text { font-family: Arial, sans-serif; font-size: 14px; }
      .text-white { fill: white; }
      .text-dark { fill: #1e293b; }
      .arrow { stroke: #64748b; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-label { font-size: 12px; fill: #64748b; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="500" y="30" class="text text-dark" font-size="20" font-weight="bold" text-anchor="middle">Home Net Guardian - System Architecture</text>

  <!-- Network Source Layer -->
  <g id="network-layer">
    <rect x="50" y="60" width="200" height="120" class="box" rx="5"/>
    <rect x="50" y="60" width="200" height="30" class="box-header" rx="5"/>
    <text x="150" y="80" class="text text-white" text-anchor="middle" font-weight="bold">Network Sources</text>
    <text x="60" y="110" class="text text-dark">• Live Network Interface</text>
    <text x="60" y="130" class="text text-dark">• PCAP Files</text>
    <text x="60" y="150" class="text text-dark">• Network Devices</text>
  </g>

  <!-- Packet Capture Layer -->
  <g id="capture-layer">
    <rect x="50" y="220" width="200" height="120" class="box" rx="5"/>
    <rect x="50" y="220" width="200" height="30" class="box-header" rx="5"/>
    <text x="150" y="240" class="text text-white" text-anchor="middle" font-weight="bold">Packet Capture</text>
    <text x="60" y="270" class="text text-dark">• Scapy Sniffer</text>
    <text x="60" y="290" class="text text-dark">• PCAP Reader</text>
    <text x="60" y="310" class="text text-dark">• Flow Aggregation</text>
  </g>

  <!-- Feature Engineering -->
  <g id="feature-layer">
    <rect x="300" y="140" width="200" height="120" class="box" rx="5"/>
    <rect x="300" y="140" width="200" height="30" class="box-header" rx="5"/>
    <text x="400" y="160" class="text text-white" text-anchor="middle" font-weight="bold">Feature Engineering</text>
    <text x="310" y="190" class="text text-dark">• Traffic Statistics</text>
    <text x="310" y="210" class="text text-dark">• Port Entropy</text>
    <text x="310" y="230" class="text text-dark">• DNS Behavior</text>
  </g>

  <!-- Detection Engine -->
  <g id="detection-layer">
    <rect x="550" y="60" width="200" height="140" class="box" rx="5"/>
    <rect x="550" y="60" width="200" height="30" class="box-header" rx="5"/>
    <text x="650" y="80" class="text text-white" text-anchor="middle" font-weight="bold">Detection Engine</text>
    <text x="560" y="110" class="text text-dark">• ML Model (IsolationForest)</text>
    <text x="560" y="130" class="text text-dark">• Heuristic Rules</text>
    <text x="560" y="150" class="text text-dark">• Anomaly Scoring</text>
    <text x="560" y="170" class="text text-dark">• Alert Generation</text>
  </g>

  <!-- Database -->
  <g id="database">
    <rect x="550" y="240" width="200" height="100" class="box" rx="5"/>
    <rect x="550" y="240" width="200" height="30" class="box-header" rx="5"/>
    <text x="650" y="260" class="text text-white" text-anchor="middle" font-weight="bold">SQLite Database</text>
    <text x="560" y="290" class="text text-dark">• Devices • Flows</text>
    <text x="560" y="310" class="text text-dark">• Alerts • Model States</text>
  </g>

  <!-- FastAPI Backend -->
  <g id="backend">
    <rect x="300" y="380" width="450" height="120" class="box" rx="5"/>
    <rect x="300" y="380" width="450" height="30" class="box-header" rx="5"/>
    <text x="525" y="400" class="text text-white" text-anchor="middle" font-weight="bold">FastAPI Backend</text>
    <text x="310" y="430" class="text text-dark">• REST API Endpoints</text>
    <text x="310" y="450" class="text text-dark">• WebSocket Real-time Stream</text>
    <text x="310" y="470" class="text text-dark">• Authentication & Security</text>
    <text x="520" y="430" class="text text-dark">• CORS Middleware</text>
    <text x="520" y="450" class="text text-dark">• Rate Limiting</text>
    <text x="520" y="470" class="text text-dark">• Input Validation</text>
  </g>

  <!-- React Frontend -->
  <g id="frontend">
    <rect x="300" y="540" width="450" height="120" class="box" rx="5"/>
    <rect x="300" y="540" width="450" height="30" class="box-header" rx="5"/>
    <text x="525" y="560" class="text text-white" text-anchor="middle" font-weight="bold">React Frontend</text>
    <text x="310" y="590" class="text text-dark">• Dashboard</text>
    <text x="310" y="610" class="text text-dark">• Device Table</text>
    <text x="310" y="630" class="text text-dark">• Alert Management</text>
    <text x="520" y="590" class="text text-dark">• Flow Visualization</text>
    <text x="520" y="610" class="text text-dark">• Real-time Updates</text>
    <text x="520" y="630" class="text text-dark">• Settings Panel</text>
  </g>

  <!-- Device Fingerprinting -->
  <g id="fingerprint">
    <rect x="50" y="380" width="200" height="100" class="box" rx="5"/>
    <rect x="50" y="380" width="200" height="30" class="box-header" rx="5"/>
    <text x="150" y="400" class="text text-white" text-anchor="middle" font-weight="bold">Device Fingerprinting</text>
    <text x="60" y="430" class="text text-dark">• MAC OUI Lookup</text>
    <text x="60" y="450" class="text text-dark">• Behavior Profiling</text>
  </g>

  <!-- Docker Container Boundaries -->
  <g id="containers" stroke-dasharray="5,5">
    <rect x="30" y="45" width="240" height="450" fill="none" stroke="#10b981" stroke-width="2" rx="10"/>
    <text x="40" y="485" class="text" fill="#10b981" font-size="12">Backend Container</text>
    
    <rect x="290" y="525" width="470" height="145" fill="none" stroke="#3b82f6" stroke-width="2" rx="10"/>
    <text x="300" y="660" class="text" fill="#3b82f6" font-size="12">Frontend Container</text>
  </g>

  <!-- Arrows showing data flow -->
  <path d="M 150 180 L 150 220" class="arrow"/>
  <text x="160" y="205" class="arrow-label">Packets</text>

  <path d="M 250 280 L 300 200" class="arrow"/>
  <text x="265" y="245" class="arrow-label">Flows</text>

  <path d="M 500 200 L 550 130" class="arrow"/>
  <text x="510" y="170" class="arrow-label">Features</text>

  <path d="M 650 200 L 650 240" class="arrow"/>
  <text x="660" y="225" class="arrow-label">Alerts</text>

  <path d="M 650 340 L 525 380" class="arrow"/>
  <text x="580" y="365" class="arrow-label">Data</text>

  <path d="M 525 500 L 525 540" class="arrow"/>
  <text x="535" y="525" class="arrow-label">API/WS</text>

  <path d="M 250 430 L 300 440" class="arrow"/>
  <text x="260" y="440" class="arrow-label">Device Info</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="800" y="100" width="180" height="150" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1" rx="5"/>
    <text x="890" y="120" class="text text-dark" font-weight="bold" text-anchor="middle">Legend</text>
    
    <rect x="810" y="130" width="20" height="15" fill="#f0f4f8" stroke="#2563eb" stroke-width="2"/>
    <text x="835" y="142" class="text text-dark" font-size="12">Component</text>
    
    <line x1="810" y1="160" x2="830" y2="160" class="arrow"/>
    <text x="835" y="164" class="text text-dark" font-size="12">Data Flow</text>
    
    <rect x="810" y="175" width="30" height="20" fill="none" stroke="#10b981" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="845" y="188" class="text text-dark" font-size="12">Backend</text>
    
    <rect x="810" y="200" width="30" height="20" fill="none" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="845" y="213" class="text text-dark" font-size="12">Frontend</text>
  </g>

  <!-- Technologies Used -->
  <g id="tech-stack">
    <rect x="800" y="280" width="180" height="200" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1" rx="5"/>
    <text x="890" y="300" class="text text-dark" font-weight="bold" text-anchor="middle">Tech Stack</text>
    
    <text x="810" y="325" class="text text-dark" font-size="12" font-weight="bold">Backend:</text>
    <text x="810" y="345" class="text text-dark" font-size="11">• Python 3.11+</text>
    <text x="810" y="360" class="text text-dark" font-size="11">• FastAPI</text>
    <text x="810" y="375" class="text text-dark" font-size="11">• SQLModel</text>
    <text x="810" y="390" class="text text-dark" font-size="11">• Scapy</text>
    <text x="810" y="405" class="text text-dark" font-size="11">• Scikit-learn</text>
    
    <text x="810" y="430" class="text text-dark" font-size="12" font-weight="bold">Frontend:</text>
    <text x="810" y="450" class="text text-dark" font-size="11">• React + TypeScript</text>
    <text x="810" y="465" class="text text-dark" font-size="11">• Vite + TailwindCSS</text>
  </g>
</svg>
